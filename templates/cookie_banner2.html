<div id="cookie-banner" class="cookie-banner" style="display: none;"> 
    <!-- style="display: none; -->
  <div class="cookie-content">
    <p>Мы используем cookies для улучшения работы сайта. Оставаясь на сайте, вы соглашаетесь с <a href="{% url 'policy' %}">Политикой конфиденциальности</a>.</p>
    <div class="cookie-buttons">
      <button id="cookie-accept" class="cookie-btn accept">Принять</button>
      <button id="cookie-reject" class="cookie-btn reject">Отклонить</button>
    </div>
  </div>
</div>

<style>
.cookie-banner {
  position: fixed;
  bottom: 0;
  /* left: 0; */
  right: 0;
  background: #2C3E50;
  color: white;
  padding: 20px;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
  z-index: 1000;
  margin: 10vw;
  border-radius: 1rem;
  width: 310px;
  max-width: 90vw;
  padding: auto;
}

.cookie-content {
  /* max-width: 300px; */
  margin: 0 2px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 15px;
  font-size:0.7rem;
  
}

.cookie-content p {
  margin: 0;
  flex: 1;
  min-width: 300px;
}

.cookie-content a {
  color: #4db2ff;
}

.cookie-buttons {
  display: flex;
  gap: 10px;
}

.cookie-btn {
  padding: 8px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
}

.accept {
  background: #2980B9;
  color: #FFFFFF;
}

.reject {
  background: #D1D8E0;
  color: #2C3E50;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const banner = document.getElementById('cookie-banner');
  const acceptBtn = document.getElementById('cookie-accept');
  const rejectBtn = document.getElementById('cookie-reject');

  // Проверяем наличие cookie
  if (!document.cookie.includes('cookie_consent=')) {
    banner.style.display = 'block';
  }

  // Обработка согласия
  acceptBtn.addEventListener('click', function() {
    setCookie('cookie_consent', 'true', 365);
    banner.style.display = 'none';
    // Здесь можно инициализировать аналитику
  });

  // Обработка отказа
  rejectBtn.addEventListener('click', function() {
    setCookie('cookie_consent', 'rejected', 30);
    banner.style.display = 'none';
  });

  function setCookie(name, value, days) {
    const date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    const expires = "expires=" + date.toUTCString();
    document.cookie = name + "=" + value + ";" + expires + ";path=/";
  }
});
</script>